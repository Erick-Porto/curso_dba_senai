
  <h2><i class="fas fa-project-diagram" style="color: var(--accent-green);"></i> Fluxo de Execução: BEFORE vs AFTER</h2>
  <div class="slide-svg-container" style="max-width: 95%;">
    <svg viewBox="0 0 550 250">
      <defs>
        <marker id="arrowhead-green" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
          <path d="M 0 0 L 10 5 L 0 10 z" class="svg-accent1-fill" />
        </marker>
         <marker id="arrowhead-blue" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
          <path d="M 0 0 L 10 5 L 0 10 z" class="svg-accent2-fill" />
        </marker>
      </defs>
      <!-- BEFORE Flow -->
      <text x="275" y="25" text-anchor="middle" class="svg-text-light-fill" font-weight="bold" font-size="16px">Fluxo de um Trigger</text>
      
      <g id="before-flow">
        <text x="135" y="50" text-anchor="middle" class="svg-text-fill" font-weight="bold">Evento DML (ex: INSERT)</text>
        <rect x="20" y="70" width="120" height="50" rx="5" class="svg-bg-light" stroke="var(--text-medium)" stroke-width="1.5"/>
        <text x="80" y="90" text-anchor="middle" class="svg-text-fill" font-size="12px">1. Aplicação</text>
        <text x="80" y="105" text-anchor="middle" class="svg-text-fill" font-size="12px">envia DML</text>

        <rect x="170" y="70" width="120" height="50" rx="5" class="svg-accent1-fill" stroke="var(--bg-dark)" stroke-width="1.5"/>
        <text x="230" y="95" text-anchor="middle" class="svg-bg-dark" font-size="12px" font-weight="bold">2. TRIGGER BEFORE</text>
        <text x="230" y="110" text-anchor="middle" class="svg-bg-dark" font-size="10px">(Valida/Modifica NEW)</text>

        <rect x="320" y="70" width="120" height="50" rx="5" class="svg-bg-medium" stroke="var(--text-light)" stroke-width="1.5"/>
        <text x="380" y="90" text-anchor="middle" class="svg-text-light-fill" font-size="12px">3. SGBD tenta</text>
        <text x="380" y="105" text-anchor="middle" class="svg-text-light-fill" font-size="12px">executar DML</text>
        
        <path d="M140 95 L 170 95" class="svg-accent1-line" marker-end="url(#arrowhead-green)" stroke-width="2"/>
        <path d="M290 95 L 320 95" class="svg-accent1-line" marker-end="url(#arrowhead-green)" stroke-width="2"/>
      </g>

      <!-- AFTER Flow -->
       <g id="after-flow" transform="translate(50, 100)">
        <text x="135" y="50" text-anchor="middle" class="svg-text-fill" font-weight="bold">(Se DML bem-sucedido)</text>
        <rect x="20" y="70" width="120" height="50" rx="5" class="svg-bg-medium" stroke="var(--text-light)" stroke-width="1.5"/>
        <text x="80" y="90" text-anchor="middle" class="svg-text-light-fill" font-size="12px">4. DML</text>
        <text x="80" y="105" text-anchor="middle" class="svg-text-light-fill" font-size="12px">Concluído</text>

        <rect x="170" y="70" width="120" height="50" rx="5" class="svg-accent2-fill" stroke="var(--bg-dark)" stroke-width="1.5"/>
        <text x="230" y="95" text-anchor="middle" class="svg-bg-dark" font-size="12px" font-weight="bold">5. TRIGGER AFTER</text>
        <text x="230" y="110" text-anchor="middle" class="svg-bg-dark" font-size="10px">(Log, Ações Pós)</text>

        <rect x="320" y="70" width="120" height="50" rx="5" class="svg-bg-light" stroke="var(--text-medium)" stroke-width="1.5"/>
        <text x="380" y="90" text-anchor="middle" class="svg-text-fill" font-size="12px">6. Confirmação</text>
        <text x="380" y="105" text-anchor="middle" class="svg-text-fill" font-size="12px">para Aplicação</text>

        <path d="M140 95 L 170 95" class="svg-accent2-line" marker-end="url(#arrowhead-blue)" stroke-width="2"/>
        <path d="M290 95 L 320 95" class="svg-accent2-line" marker-end="url(#arrowhead-blue)" stroke-width="2"/>
      </g>
    </svg>
  </div>
  <p style="margin-top: 10px;"><code>BEFORE</code> triggers podem modificar <code>NEW</code> ou cancelar a operação (gerando erro). <code>AFTER</code> triggers agem sobre um fato consumado.</p>
